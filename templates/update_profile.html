<!-- update_profile.html -->
{% extends 'base.html' %}
{% block title %}Update Profile - {{ user.username }} - Hanacaraka{% endblock %}
{% block main_content %}
    <div class="container">
        <h2 class="text-center mb-4">Update {{ user.username }}'s Profile</h2>
        <div id="message"></div>
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <form id="updateForm" 
                      data-update-url="{{ url_for('profile.update_profile') }}" 
                      data-csrf-token="{{ csrf_token() }}" 
                      data-profile-page-url="{{ url_for('profile.profile_page') }}"
                      enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="username" class="form-label">Username</label>
                        <input type="text" 
                               class="form-control" 
                               id="username" 
                               name="username" 
                               value="{{ user.username }}" 
                               pattern="[a-zA-Z0-9_]{3,80}" 
                               title="Username must be 3-80 characters long and contain only letters, numbers, or underscores">
                    </div>
                    <div class="mb-3">
                        <label for="status" class="form-label">Status</label>
                        <textarea class="form-control" 
                                  id="status" 
                                  name="status" 
                                  maxlength="200">{{ status.status if status else '' }}</textarea>
                    </div>
                    <div class="mb-3">
                        <label for="profile_image" class="form-label">Profile Image (JPG/PNG, max 500KB)</label>
                        <input type="file" 
                               class="form-control" 
                               id="profile_image" 
                               name="profile_image" 
                               accept="image/jpeg,image/png">
                    </div>
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block scripts %}
    <script src="{{ url_for('static', filename='js/update_profile.js') }}?v=1.0"></script>
{% endblock %}